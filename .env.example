# Example environment variables for Tagline backend

# Database connection string. If not set, defaults to local SQLite file (sqlite:///./tagline.db)
DATABASE_URL=sqlite:///:memory:
# DATABASE_URL=postgresql+psycopg2://user:password@localhost:5432/tagline

# Set the application environment.
# Use "production" for production (default if unset), or "development" for friendly/dev responses at the root endpoint.
APP_ENV=production

STORAGE_PROVIDER=memory

# STORAGE_PROVIDER options:
#   - filesystem: real item storage (requires FILESYSTEM_STORAGE_PATH)
#   - null: accepts all ops, stores nothing, never fails (great for CI/demo)
#   - memory: ephemeral in-memory storage, wiped on restart (great for tests/dev)
#   - dropbox: Dropbox cloud storage (now implemented and working!)

# Filesystem storage provider settings
# FILESYSTEM_STORAGE_PATH=/tmp

# Dropbox storage provider settings (implemented and supported)
# Dropbox storage provider (refresh token flow recommended)
# DROPBOX_REFRESH_TOKEN=your-dropbox-refresh-token
# DROPBOX_APP_KEY=your-dropbox-app-key
# DROPBOX_APP_SECRET=your-dropbox-app-secret
# DROPBOX_ROOT_PATH=/your/dropbox/files
#
# [DEPRECATED] Legacy access token support (not recommended):
# DROPBOX_ACCESS_TOKEN=your-dropbox-access-token

# Authentication and security settings
# TAGLINE_API_KEY=your-very-secret-api-key  # API key for authenticating backend requests (required for production)
BACKEND_PASSWORD=abc123  # Password for backend authentication (required)
JWT_SECRET_KEY=supersecretkey  # Secret key for signing JWT tokens (required; must be long, random, and kept secret!)

# Redis connection string for authentication token storage
# For dev (Docker Compose):
REDIS_URL=redis://redis:6379/0

# Comma-separated list of allowed CORS origins (for browser-based frontends)
# Example: http://localhost:3000,https://myfrontend.com
CORS_ALLOWED_ORIGINS=http://localhost:3000
# For prod, use your managed Redis instance URL
# REDIS_URL=redis://<host>:<port>/<db>

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Determines the verbosity of application logs.
# Defaults to INFO if not set or invalid.
# LOG_LEVEL=INFO

# Maximum in-memory thumbnail cache size (in MB) for /photos/{id}/thumbnail endpoint
# Default: 100
THUMBNAIL_CACHE_MAX_MB=100

# Add other environment variables below as needed, e.g.:
# DATABASE_URL=postgresql://user:pass@localhost:5432/tagline

# ---
# E2E/test-only environment variables
#
# TAGLINE_E2E_PHOTO_ID is used ONLY by end-to-end tests for GET /photos/{id}/image.
# Set to the UUID of a photo with a valid image in your backend to enable the "happy path" E2E test.
# If unset, that test will be skipped. This variable is ignored by the app unless a test specifically uses it,
# and is safe to leave in .env due to permissive settings config.
# TAGLINE_E2E_PHOTO_ID=ad08541f-900d-4556-b1cd-d5aaa1e6841d
